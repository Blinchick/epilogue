(this.webpackJsonpepilogue=this.webpackJsonpepilogue||[]).push([[0],{27:function(e,t,a){e.exports=a(45)},32:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(25),r=a.n(l),c=(a(32),a(6)),s=a(7),i=a(9),u=a(8),m=a(10),p=a(1),d=a(12),h=a(16),b=a.n(h);a(36);b.a.initializeApp({apiKey:"AIzaSyDrz7n6Ua5IC0fSw6zA4-6ODK3oY7kok5Q",authDomain:"epilogue-v2.firebaseapp.com",databaseURL:"https://epilogue-v2.firebaseio.com",projectId:"epilogue-v2",storageBucket:"epilogue-v2.appspot.com",messagingSenderId:"609448869081",appId:"1:609448869081:web:fc4acc06a4835626ddd2c8"});var v=b.a,f=v.database().ref("/books"),k=new(function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return f}},{key:"create",value:function(e){return f.push(e)}},{key:"update",value:function(e,t){return f.child(e).update(t)}},{key:"delete",value:function(e){return f.child(e).remove()}}]),e}()),E=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onDataChange=function(t){var a=[],n=t.val();for(var o in console.log(n),n)a.push({bookId:o,title:n[o].title,writer:n[o].writer});e.setState({allBooks:a})},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={title:e.state.title,writer:e.state.writer};k.create(a).then((function(){e.setState({title:"",writer:""})})).catch((function(e){console.log(e)}))},e.handleDelete=function(e){e.preventDefault(),k.delete("".concat(e.currentTarget.name))},e.state={title:"",writer:"",poscript:"",allBooks:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){k.getAll().on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){k.getAll().off("value",this.onDatachange)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"displayBooks"},o.a.createElement("form",{action:""},o.a.createElement("h2",null,"Add Book"),o.a.createElement("label",{htmlFor:"title",className:"sr-only"},"Add Book"),o.a.createElement("input",{type:"text",name:"title",id:"title",onChange:this.handleChange,value:this.state.title,placeholder:"Add Book",minLength:"5"}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"writer",className:"sr-only"},"Add Writer"),o.a.createElement("input",{type:"text",name:"writer",id:"writer",onChange:this.handleChange,value:this.state.writer,placeholder:"Add Writer",minLength:"5"}),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"submit"},"Submit")),o.a.createElement("div",{className:"oneBook",onClick:this.handleBook},o.a.createElement("h2",null,"MY BOOKS"),o.a.createElement("div",{className:"allBooks"},this.state.allBooks.map((function(t){return o.a.createElement("div",{className:"books ".concat(t.bookId),id:"".concat(t.bookId),key:t.bookId},o.a.createElement("p",null,o.a.createElement("strong",null,t.title," "),o.a.createElement("br",null),"by",o.a.createElement("strong",null," ",t.writer)),o.a.createElement("div",null,o.a.createElement(m.b,{to:"/books/".concat(t.bookId)},o.a.createElement("i",{className:"fas fa-pen-nib",title:"write your P.S."})),o.a.createElement("button",{onClick:e.handleDelete,className:"delete",title:"delete",name:"".concat(t.bookId)},o.a.createElement("i",{className:"far fa-trash-alt"}))))}))))),o.a.createElement("div",{className:"prevPage"},o.a.createElement(m.b,{className:"linkBack",exact:!0,to:"/"},"Back")))}}]),a}(n.Component);var g={display:"none"},y=function(e){var t=v.database().ref("books/".concat(e.bookId,"/postscript/").concat(e.post.postId));function a(t,a){var n=document.querySelector("textarea[id = '".concat(e.post.postId,"']"));"none"===n.style.display?(n.style.display="inline",t.style.display="none",a.style.display="inline"):(n.style.display="none",t.style.display="inline",a.style.display="none")}return o.a.createElement(o.a.Fragment,null,o.a.createElement("br",null),o.a.createElement("button",{onClick:function(t){t.preventDefault(),a(t.currentTarget,document.querySelector("button.modify.".concat(e.post.postId)))},className:"update ".concat(e.post.postId),title:"update P.S."},o.a.createElement("i",{className:"far fa-edit"})),o.a.createElement("button",{style:g,onClick:function(n){n.preventDefault(),t.update({postscript:"".concat(e.newValue)});var o=n.currentTarget;a(document.querySelector("button.update.".concat(e.post.postId)),o)},className:"modify ".concat(e.post.postId),title:"done"},o.a.createElement("i",{className:"far fa-check-square"})),o.a.createElement("button",{onClick:function(e){e.preventDefault(),t.remove()},className:"delete ".concat(e.post.postId),title:"delete"},o.a.createElement("i",{className:"far fa-trash-alt"})))},N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(d.a)({},e.target.name,e.target.value))},n.state={postscripts:[],singleBookId:Object.values(n.props).toString()},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.database().ref("/books/".concat(this.state.singleBookId,"/postscript")).on("value",(function(t){var a=t.val(),n=[];for(var o in a)n.push({postId:o,postscripts:a[o].postscript}),e.setState({postscripts:n})}))}},{key:"componentWillUnmount",value:function(){v.database().ref("/books").off()}},{key:"render",value:function(){var e=this,t=this.state,a=t.postscripts,n=t.singleBookId,l=t.update;return o.a.createElement("div",null,a.map((function(t){return o.a.createElement(o.a.Fragment,{key:t.postId},o.a.createElement("p",null,t.postscripts),o.a.createElement("form",{action:""},o.a.createElement("label",{htmlFor:"update",className:"sr-only"},"Update"),o.a.createElement("textarea",{style:w,className:"update",name:"update",id:t.postId,cols:"10",rows:"5",onChange:e.handleChange,defaultValue:t.postscripts}),o.a.createElement(y,{post:t,bookId:n,newValue:l})))})))}}]),a}(n.Component),w={display:"none"},I=N,B=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value))},e.handleAdd=function(t){t.preventDefault(),v.database().ref("/books/".concat(e.state.singleBook[0].bookId)).child("/postscript").push({postscript:e.state.postscript})},e.state={singleBook:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.database().ref("/books").on("value",(function(t){var a=t.val(),n=[];for(var o in a)"/books/"+o==="".concat(e.props.location.pathname)&&n.push({bookId:o,title:a[o].title,writer:a[o].writer}),e.setState({singleBook:n})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"singleBook"},this.state.singleBook.map((function(e){return o.a.createElement("div",{className:"post"},o.a.createElement("h2",null,"Title: ",e.title,o.a.createElement("br",null),"Writer: ",e.writer),o.a.createElement("div",{className:"singlePost"},o.a.createElement(I,{id:e.bookId})))})),o.a.createElement("form",{className:"addPost",action:"",onSubmit:this.handleAdd},o.a.createElement("h2",null,"ADD NEW POSTSCRIPT"),o.a.createElement("label",{htmlFor:"postscript",className:"sr-only"},"Add Postscript"),o.a.createElement("textarea",{name:"postscript",id:"postsript",cols:"30",rows:"10",placeholder:"Type here anything",minLength:"5",value:this.state.postscript,onChange:this.handleChange}),o.a.createElement("br",null),o.a.createElement("button",{type:"submit",className:"submit"},"SUBMIT"))),o.a.createElement("div",{className:"prevPage"},o.a.createElement(m.b,{className:"linkBack",exact:!0,to:"/books"},"Back")))}}]),a}(n.Component),O=(a(44),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(m.a,{basename:"/"},o.a.createElement(p.a,{exact:!0,path:"/"},o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"landingPage"},o.a.createElement("div",{className:"note"},o.a.createElement("h3",null,"Hello there!"),o.a.createElement("p",null,"If you like to read, you probably have many things to say about books. Either you have a strong opinion about character, story or just want to save your favourite quote."),o.a.createElement("p",null,"Epilogue is online book diary created by book lover for book lovers.")),o.a.createElement("div",{className:"epilogue"},o.a.createElement("div",null,o.a.createElement("h1",null,"EPILOGUE"),o.a.createElement("h2",null,"Book Diary")))),o.a.createElement("div",{className:"nextPage"},o.a.createElement(m.b,{to:"/books"},"TURN THE PAGE")))),o.a.createElement(p.a,{exact:!0,path:"/books",component:E}),o.a.createElement(p.a,{path:"/books/:id",component:B}))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.b00ccbb7.chunk.js.map